import argparse
import os
import pytest
from .statSTR import *

TESTDIR = os.path.join(os.path.dirname(os.path.abspath(__file__)), "test_files")

# Set up base argparser
def base_argparse():
    args = argparse.ArgumentParser()
    args.vcfs = None
    args.out = "test"
    args.samples = None 
    args.region = None
    args.thresh = False
    args.afreq = False
    args.acount = False
    args.hwep = False
    args.het = False
    args.use_length = False
    return args

# Test no such file or directory
def test_WrongFile():
    args = base_argparse()
    # Try a dummy file name. Make sure it doesn't exist before we try
    fname1 = "xxxx"
    if os.path.exists(fname1):
        os.remove(fname1)
    args.vcf = fname1
    retcode = main(args)
    assert retcode==1

# Test the right file or directory
def test_RightFile():
    args = base_argparse()
    fname1 = os.path.join(TESTDIR, "test_file.vcf")
    args.vcf = fname1
    retcode = main(args)
    assert retcode==0


